/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[85,24,54,57],{348:function(e,t,r){e.exports=function(){"use strict";var g="undefined"!=typeof document&&document.documentMode,e={rootMargin:"0px",threshold:0,load:function(e){if("picture"===e.nodeName.toLowerCase()){var t=e.querySelector("img"),r=!1;null===t&&(t=document.createElement("img"),r=!0),g&&e.getAttribute("data-iesrc")&&(t.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(t.alt=e.getAttribute("data-alt")),r&&e.append(t)}if("video"===e.nodeName.toLowerCase()&&!e.getAttribute("data-src")&&e.children){for(var a=e.children,n=void 0,i=0;i<=a.length-1;i++)(n=a[i].getAttribute("data-src"))&&(a[i].src=n);e.load()}e.getAttribute("data-poster")&&(e.poster=e.getAttribute("data-poster")),e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset"));var o=",";if(e.getAttribute("data-background-delimiter")&&(o=e.getAttribute("data-background-delimiter")),e.getAttribute("data-background-image"))e.style.backgroundImage="url('"+e.getAttribute("data-background-image").split(o).join("'),url('")+"')";else if(e.getAttribute("data-background-image-set")){var l=e.getAttribute("data-background-image-set").split(o),u=l[0].substr(0,l[0].indexOf(" "))||l[0];u=-1===u.indexOf("url(")?"url("+u+")":u,1===l.length?e.style.backgroundImage=u:e.setAttribute("style",(e.getAttribute("style")||"")+"background-image: "+u+"; background-image: -webkit-image-set("+l+"); background-image: image-set("+l+")")}e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded:function(){}};function t(e){e.setAttribute("data-loaded",!0)}var r=function(e){return"true"===e.getAttribute("data-loaded")},n=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)};return function(){var o,a,l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=Object.assign({},e,c),i=d.root,v=d.rootMargin,m=d.threshold,u=d.load,g=d.loaded,s=void 0;"undefined"!=typeof window&&window.IntersectionObserver&&(s=new IntersectionObserver((o=u,a=g,function(e,n){e.forEach((function(e){(0<e.intersectionRatio||e.isIntersecting)&&(n.unobserve(e.target),r(e.target)||(o(e.target),t(e.target),a(e.target)))}))}),{root:i,rootMargin:v,threshold:m}));for(var f,h=n(l,i),b=0;b<h.length;b++)(f=h[b]).getAttribute("data-placeholder-background")&&(f.style.background=f.getAttribute("data-placeholder-background"));return{observe:function(){for(var e=n(l,i),o=0;o<e.length;o++)r(e[o])||(s?s.observe(e[o]):(u(e[o]),t(e[o]),g(e[o])))},triggerLoad:function(e){r(e)||(u(e),t(e),g(e))},observer:s}}}()},359:function(e,t){function r(e,t,r){var n,o,l,c,d;function v(){var m=Date.now()-c;m<t&&m>=0?n=setTimeout(v,t-m):(n=null,r||(d=e.apply(l,o),l=o=null))}null==t&&(t=100);var m=function(){l=this,o=arguments,c=Date.now();var m=r&&!n;return n||(n=setTimeout(v,t)),m&&(d=e.apply(l,o),l=o=null),d};return m.clear=function(){n&&(clearTimeout(n),n=null)},m.flush=function(){n&&(d=e.apply(l,o),l=o=null,clearTimeout(n),n=null)},m}r.debounce=r,e.exports=r},366:function(e,t,r){var content=r(516);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(52).default)("32448bfb",content,!0,{sourceMap:!1})},367:function(e,t,r){var n=r(4),o=r(231).values;n({target:"Object",stat:!0},{values:function(e){return o(e)}})},372:function(e,t,r){"use strict";r.r(t);var n=r(3),o=r(6),l=(r(23),r(230),r(22),r(8),r(29),r(82),r(21),r(20),r(27),r(17),r(28),r(60)),c=r(359),d=r(44),v=r(11);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var f={name:"TagSearch",data:function(){return{setApi:"setTags",searchedString:"",tagList:null,loading:!1,autoSuggestionOpen:!1,deleteWarning:!1}},props:{tags:{type:String,default:""}},directives:{outsideClick:l.a},components:{Spinner:d.default},watch:{searchedString:Object(c.debounce)((function(){this.fetchingData()}),700)},computed:{tagExists:function(){var e=this;return this.tagList.findIndex((function(t){return t.title===e.searchedString}))>-1},selectedTags:function(){return this.tags?this.tags.split(",").filter((function(e){return e})):[]}},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({deleteKeyPress:function(){this.searchedString||(this.deleteWarning&&this.deleteTag(this.selectedTags[this.selectedTags.length-1]),this.deleteWarning=!this.deleteWarning)},deleteTag:function(e){this.$emit("delete",e)},openResult:function(){this.autoSuggestionOpen=!this.autoSuggestionOpen,this.fetchingData()},saveTag:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.setRequest({params:{title:e.searchedString},api:"setTags"});case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",e.$nuxt.error(t.t0));case 9:e.loading=!1;case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()},fetchingData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.getRequest({params:{q:e.searchedString},api:"getTags"});case 4:r=t.sent,(data=r.data)&&(e.tagList=data),t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",e.$nuxt.error(t.t0));case 12:e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},autoSuggestionClose:function(){this.autoSuggestionOpen=this.deleteWarning=!1,this.searchedString=""},emitAddingTag:function(e){-1===this.selectedTags.findIndex((function(t){return t===e}))&&this.$emit("add",e)},clickedItem:function(data){data||(this.saveTag(),data=this.searchedString),this.emitAddingTag(data),this.autoSuggestionClose(),this.$refs.tagSearchInput.focus()}},Object(v.b)("common",["setRequest","getRequest"]))},h=f,_=(r(515),r(14)),component=Object(_.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.autoSuggestionClose,expression:"autoSuggestionClose"}],staticClass:"tag-wrapper"},[r("ul",{staticClass:"tags"},[e._l(e.selectedTags,(function(t,n){return r("li",{key:n,class:{warning:e.deleteWarning&&n===e.selectedTags.length-1}},[r("span",{staticClass:"tag"},[e._v("\n        "+e._s(t)+"\n        "),r("span",{staticClass:"close-btn",on:{click:function(r){return e.deleteTag(t)}}},[r("i",{staticClass:"icon close-icon"})])])])})),e._v(" "),r("li",{staticClass:"tag-input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchedString,expression:"searchedString"}],ref:"tagSearchInput",attrs:{type:"text",placeholder:"Write here"},domProps:{value:e.searchedString},on:{focus:e.openResult,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.clickedItem({title:e.searchedString}))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deleteKeyPress()}],input:function(t){t.target.composing||(e.searchedString=t.target.value)}}})])],2),e._v(" "),e.autoSuggestionOpen?r("div",{staticClass:"tag-dropdown"},[e.loading?r("div",{staticClass:"spinner-wrapper"},[r("spinner",{attrs:{radius:40,color:"primary"}})],1):e.tagList?r("ul",[e._l(e.tagList,(function(t,n){return r("li",{key:n},[r("a",{attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.clickedItem(t.title)}}},[e._v("\n          "+e._s(t.title)+"\n        ")])])})),e._v(" "),e.searchedString&&!e.tagExists?r("li",[r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.clickedItem(null)}}},[e._v("\n          "+e._s(e.searchedString)+" (New)\n        ")])]):e._e()],2):e.searchedString?e._e():r("p",[e._v("\n      Nothing found\n    ")])]):e._e()])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Spinner:r(44).default})},509:function(e,t,r){var content=r(543);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(52).default)("61ef1aa8",content,!0,{sourceMap:!1})},510:function(e,t,r){var content=r(545);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(52).default)("5be6a80a",content,!0,{sourceMap:!1})},513:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(133);var o=r(161),l=r(103);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||Object(o.a)(e)||Object(l.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},515:function(e,t,r){"use strict";r(366)},516:function(e,t,r){var n=r(51)(!1);n.push([e.i,".tag-wrapper{border:1px solid #ddd;border-radius:4px;padding:10px 15px;position:relative}.tag-wrapper .tags{display:flex;flex-wrap:wrap}.tag-wrapper .tags .tag-input{flex-grow:1;position:relative;padding-right:34px}.tag-wrapper .tags .tag-input .spinner{position:absolute;top:50%;transform:translateY(-50%);right:5px}.tag-wrapper .tags .tag-input input{border:none;padding:0;line-height:30px;height:30px;margin:5px 10px 5px 0;box-shadow:none;background:none}.tag-wrapper .tags .tag{border:1px solid #ddd;border-radius:50px;line-height:25px;height:30px;color:#333;margin:5px 10px 5px 0;background:#eee;position:relative;padding:0 30px 0 10px;display:flex;align-items:center}.tag-wrapper .tags .tag .close-btn{position:absolute;top:50%;margin-top:-10px;right:3px;cursor:pointer;color:#333;height:20px;width:20px;line-height:10px;border:1px solid #ddd;background:#ddd;margin-left:5px}.tag-wrapper .tags .tag .close-btn .close-icon{min-width:20px}.tag-wrapper .warning .tag{border-color:#a12321;background:#a12321;color:#fff}.tag-wrapper .tag-dropdown{overflow:auto;min-height:100px;max-height:300px;position:absolute;top:calc(100% + 1px);left:0;right:0;z-index:1;background:#fff;box-shadow:0 3px 10px rgba(0,0,0,.1);padding:15px 15px 5px;border-radius:5px}.tag-wrapper .tag-dropdown li a{border:1px solid #ddd;border-radius:50px;padding:0 20px;line-height:30px;height:32px;color:#333;margin:0 10px 10px 0}.tag-wrapper .tag-dropdown li a:hover{background:#eee}",""]),e.exports=n},520:function(e,t,r){"use strict";r.r(t);r(229),r(20),r(66);var n=r(560),o=r(59),l=r(232),c=r.n(l),d={name:"WYSIWYGEditor",data:function(){return{acceptedTags:["iframe"],productDescription:"",editAsHtml:!1,fullScreen:!1,focused:!1}},props:{title:{type:String,default:"Description"},type:{type:Number,required:!1},description:{type:String,default:""}},mixins:[o.a],components:{VueEditor:n.a},watch:{description:function(e){this.productDescription=c.a.sanitize(e,{ADD_TAGS:this.acceptedTags})}},computed:{},methods:{descriptionChange:function(){this.$emit("change",c.a.sanitize(this.productDescription,{ADD_TAGS:this.acceptedTags}))},fullScreenToggle:function(){this.fullScreen=!this.fullScreen},handleImageRemoved:function(e,t,r,n){this.handleDescriptionImage(!0,e,t,r,n)},handleImageAdded:function(e,t,r,n){this.handleDescriptionImage(!1,e,t,r,n)},handleDescriptionImage:function(e,t,r,n,o){this.$emit("file",{deleted:e,file:t,Editor:r,cursorLocation:n,resetUploader:o})}},beforeCreate:function(){},destroyed:function(){},created:function(){},mounted:function(){this.productDescription=c.a.sanitize(this.description)}},v=(r(544),r(14)),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wysiwyg-wrapper",class:[{"full-screen":e.fullScreen},{focused:e.focused}]},[r("div",{staticClass:"dply-felx mb-15"},[r("label",{staticClass:"mb-0"},[e._v(e._s(e.title))]),e._v(" "),r("div",{staticClass:"custom-toolbar"},[r("button",{staticClass:"mr-10 outline-btn",on:{click:function(t){t.preventDefault(),e.editAsHtml=!e.editAsHtml}}},[e._v("\n        Edit As "+e._s(e.editAsHtml?"WYSIWYG":"HTML")+"\n      ")]),e._v(" "),r("button",{staticClass:"outline-btn",on:{click:function(t){return t.preventDefault(),e.fullScreenToggle.apply(null,arguments)}}},[e._v("\n        "+e._s(e.fullScreen?"Normal":"Full")+" Screen\n      ")]),e._v(" "),e.fullScreen?r("button",{staticClass:"ml-10 close-btn",on:{click:function(t){return t.preventDefault(),e.fullScreenToggle.apply(null,arguments)}}},[r("i",{staticClass:"icon close-icon"})]):e._e()])]),e._v(" "),e.editAsHtml?r("p",{staticClass:"info-msg mb-20 mb-sm-15"},[e._v("\n    Supported tags: h1, h2...h6, p, strong, em, u, s, blockquote, pre, ul, li, ol, br, a, img, video.\n    Please make sure your edited text is inside of these tags.\n  ")]):e._e(),e._v(" "),e.editAsHtml?r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.productDescription,expression:"productDescription"}],domProps:{value:e.productDescription},on:{change:e.descriptionChange,input:function(t){t.target.composing||(e.productDescription=t.target.value)}}}):r("vue-editor",{attrs:{useCustomImageHandler:""},on:{focus:function(t){e.focused=!0},blur:function(t){e.focused=!1},"text-change":e.descriptionChange,"image-added":e.handleImageAdded,"image-removed":e.handleImageRemoved},model:{value:e.productDescription,callback:function(t){e.productDescription=t},expression:"productDescription"}})],1)}),[],!1,null,null,null);t.default=component.exports},542:function(e,t,r){"use strict";r(509)},543:function(e,t,r){var n=r(51)(!1);n.push([e.i,".atr-wrapper{border-radius:5px;border:1px solid #ddd;background:#f7f7f5}.atr-wrapper .single-atr{display:flex;flex-wrap:wrap;align-items:center;border-bottom:1px solid #ddd}.atr-wrapper .single-atr label{padding:15px}.atr-wrapper .single-atr .atr-title{width:120px;max-width:120px}.atr-wrapper .single-atr:last-child{border-bottom:none}",""]),e.exports=n},544:function(e,t,r){"use strict";r(510)},545:function(e,t,r){var n=r(51)(!1);n.push([e.i,".custom-toolbar{display:flex;align-items:center}.ql-editor{max-height:400px}.ql-editor li{line-height:1.9;display:block}.focused .ql-container{border-color:#444!important}.focused .ql-toolbar.ql-snow{border-color:#444!important;border-bottom:1px solid #ccc}.ql-toolbar.ql-snow+.ql-container.ql-snow{border-radius:0 0 5px 5px}.ql-toolbar.ql-snow{border-radius:5px 5px 0 0}.has-error .whysigwyg-error .ql-container,.has-error .whysigwyg-error .ql-toolbar.ql-snow{border-color:red!important}.full-screen{padding:30px;position:fixed;top:0;bottom:0;left:0;right:0;z-index:10;display:flex;flex-direction:column;background:#fff}.full-screen .ql-editor{max-height:4000px}.full-screen .quillWrapper{display:flex;flex-direction:column;flex-grow:1}.full-screen .quillWrapper .ql-container,.full-screen textarea{flex-grow:1}@media only screen and (max-width:768px){.wysiwyg-wrapper .dply-felx{display:block;margin:10px 0}.wysiwyg-wrapper .dply-felx .custom-toolbar button{margin-top:10px}}",""]),e.exports=n},553:function(e,t,r){"use strict";r.r(t);r(21),r(20),r(27),r(28);var n=r(513),o=r(3),l=r(6),c=(r(23),r(229),r(40),r(157),r(54),r(8),r(17),r(80),r(230),r(22),r(158),r(367),r(233),r(46),r(525),r(45),r(526),r(527),r(528),r(529),r(530),r(531),r(532),r(533),r(534),r(535),r(536),r(537),r(538),r(539),r(540),r(541),r(343)),d=r(346),v=r(11);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={name:"ProductInventory",data:function(){return{result:[],selectedAttributes:[],selectedAttributeValues:[],selected:{},combinations:[],formSubmitting:!1,redirect:!1,existing:{}}},props:{attributes:{type:Array,default:[]},productPrice:{type:Number,default:0}},mixins:[],components:{AjaxButton:c.default,ErrorFormatter:d.default},computed:f({currencyIcon:function(){var e;return(null===(e=this.setting)||void 0===e?void 0:e.currency_icon)||"$"},productId:function(){return this.$route.params.id}},Object(v.c)("setting",["setting"])),methods:f({redirectingEnable:function(e){this.redirect="save"===e},fetchingData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e.getById({id:e.productId,params:{},api:"getInventory"});case 4:e.result=t.sent,e.loading=!1,t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",e.$nuxt.error(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},saveInventory:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.redirectingEnable(event.submitter.name),e.formSubmitting=!0,t.prev=2,t.next=5,e.setById({id:e.productId,params:{inventories:e.combinations},api:"setInventory"});case 5:if(!(data=t.sent)){t.next=13;break}return e.result=data,t.next=10,e.mappingData();case 10:e.$router.push({path:"/products".concat(e.redirect?"":"/"+e.productId)}),t.next=14;break;case 13:e.$emit("has-error");case 14:t.next=19;break;case 16:return t.prev=16,t.t0=t.catch(2),t.abrupt("return",e.$nuxt.error(t.t0));case 19:e.formSubmitting=!1;case 20:case"end":return t.stop()}}),t,null,[[2,16]])})))()},renderLabel:function(e){return e.map((function(i){return i.title})).join(" + ")},combos:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(r===e.length){var c={id:"",price:this.productPrice,quantity:0},d=l.map((function(e){return e.id})).join("-");void 0!==this.existing[d]&&(c={id:this.existing[d].id,price:this.existing[d].price,quantity:this.existing[d].quantity}),o.push(f(f({},c),{values:l}))}else e[r].forEach((function(c){return t.combos(e,r+1,o,[].concat(Object(n.a)(l),[c]))}));return o},attributeValueChanged:function(e,t){var r,n,o;if(t.target.checked)-1===(null===(r=this.selectedAttributes)||void 0===r?void 0:r.findIndex((function(i){return i===(null==e?void 0:e.attribute_id)})))&&(this.selectedAttributes.push(e.attribute_id),this.selected=f(f({},this.selected),Object(l.a)({},e.attribute_id,[]))),-1===(null===(n=this.selected[e.attribute_id])||void 0===n?void 0:n.findIndex((function(i){return i===e.id})))&&this.selected[e.attribute_id].push(e);else if(this.selected[e.attribute_id]=this.selected[null==e?void 0:e.attribute_id].filter((function(i){return i.id!==e.id})),null===(o=this.selected[e.attribute_id])||void 0===o||!o.length){delete this.selected[e.attribute_id];var c=this.selectedAttributes.findIndex((function(i){return e.attribute_id===i}));this.selectedAttributes.splice(c,1)}this.combinations=this.combos(Object.values(this.selected))},attributeChanged:function(e,t){if(t.target.checked){var r,o=null===(r=this.attributes.find((function(i){return i.id===e.id})))||void 0===r?void 0:r.values;this.selected=f(f({},this.selected),Object(l.a)({},e.id,o));var c=null==o?void 0:o.map((function(i){return i.id}));this.selectedAttributeValues=Object(n.a)(new Set(this.selectedAttributeValues.concat(c)))}else{var d,v=null===(d=this.selected[e.id])||void 0===d?void 0:d.map((function(i){return i.id}));delete this.selected[e.id],this.selectedAttributeValues=this.selectedAttributeValues.filter((function(e){return-1===v.indexOf(e)}))}this.combinations=this.combos(Object.values(this.selected))},mappingData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.result||!e.result.length){t.next=11;break}return e.selected={},e.combinations=[],o=[],c=[],t.next=7,null===(r=Object.values(e.result))||void 0===r?void 0:r.forEach((function(i){var t=[];i.inventory_attributes.forEach((function(r){o.push(r.attribute_value.attribute_id),c.push(r.attribute_value.id),t.push(r.attribute_value),void 0===e.selected[r.attribute_value.attribute_id]&&(e.selected=f(f({},e.selected),Object(l.a)({},r.attribute_value.attribute_id,[]))),-1===e.selected[r.attribute_value.attribute_id].findIndex((function(i){return r.attribute_value.id===i.id}))&&e.selected[r.attribute_value.attribute_id].push(r.attribute_value)})),e.existing[t.map((function(e){return e.id})).join("-")]={id:i.id,price:parseFloat(i.price)>0?i.price:e.productPrice,quantity:i.quantity},e.combinations.push({id:i.id,price:parseFloat(i.price)>0?i.price:e.productPrice,quantity:i.quantity,values:t})}));case 7:e.selectedAttributes=Object(n.a)(new Set(o)),e.selectedAttributeValues=Object(n.a)(new Set(c)),t.next=12;break;case 11:e.combinations=[{price:e.productPrice,quantity:0,values:[]}];case 12:case"end":return t.stop()}}),t)})))()}},Object(v.b)("common",["getById","setById"])),beforeCreate:function(){},destroyed:function(){},created:function(){},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchingData();case 2:return t.next=4,e.mappingData();case 4:case"end":return t.stop()}}),t)})))()}},_=h,y=(r(542),r(14)),component=Object(y.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-wrapper attr-inventory"},[r("error-formatter",{attrs:{type:"inventory"}}),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.saveInventory.apply(null,arguments)}}},[e.attributes&&e.attributes.length?r("div",{staticClass:"mb-20 mb-sm-15 atr-wrapper"},e._l(e.attributes,(function(t,n){return r("div",{key:n,staticClass:"single-atr"},[t.values.length?[r("label",{staticClass:"cb atr-title f-1-2 bold"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedAttributes,expression:"selectedAttributes"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.selectedAttributes)?e._i(e.selectedAttributes,t.id)>-1:e.selectedAttributes},on:{change:[function(r){var n=e.selectedAttributes,o=r.target,l=!!o.checked;if(Array.isArray(n)){var c=t.id,d=e._i(n,c);o.checked?d<0&&(e.selectedAttributes=n.concat([c])):d>-1&&(e.selectedAttributes=n.slice(0,d).concat(n.slice(d+1)))}else e.selectedAttributes=l},function(r){return e.attributeChanged(t,r)}]}}),e._v(" "),r("span",[e._v(e._s(t.title))])]),e._v(" "),e._l(t.values,(function(t,i){return r("label",{key:i,staticClass:"cb"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedAttributeValues,expression:"selectedAttributeValues"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.selectedAttributeValues)?e._i(e.selectedAttributeValues,t.id)>-1:e.selectedAttributeValues},on:{change:[function(r){var n=e.selectedAttributeValues,o=r.target,l=!!o.checked;if(Array.isArray(n)){var c=t.id,d=e._i(n,c);o.checked?d<0&&(e.selectedAttributeValues=n.concat([c])):d>-1&&(e.selectedAttributeValues=n.slice(0,d).concat(n.slice(d+1)))}else e.selectedAttributeValues=l},function(r){return e.attributeValueChanged(t,r)}]}}),e._v(" "),r("span",[e._v(e._s(t.title))])])}))]:e._e()],2)})),0):e._e(),e._v(" "),r("div",{staticClass:"table-wrapper mb-20 mb-sm-15"},[r("table",{staticClass:"mn-w-400x"},[r("tr",{staticClass:"lite-bold"},[r("th",[e._v("Attributes")]),e._v(" "),r("th",[e._v("Price("+e._s(e.currencyIcon)+")")]),e._v(" "),r("th",[e._v("Quantity")])]),e._v(" "),e._l(e.combinations,(function(t,n){return r("tr",{key:n},[r("td",[t.values.length?r("h5",{staticClass:"mx-w-400x"},[e._v(e._s(e.renderLabel(t.values)))]):r("h5",{staticClass:"mx-w-400x"},[e._v("Available quantity")])]),e._v(" "),r("td",{staticClass:"w-120x"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"item.price"}],attrs:{disabled:!t.values.length,type:"number",step:"any",placeholder:"Price"},domProps:{value:t.price},on:{input:function(r){r.target.composing||e.$set(t,"price",r.target.value)}}})]),e._v(" "),r("td",{staticClass:"w-120x"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"item.quantity"}],attrs:{type:"number",step:"any",placeholder:"Quantity"},domProps:{value:t.quantity},on:{input:function(r){r.target.composing||e.$set(t,"quantity",r.target.value)}}})])])}))],2)]),e._v(" "),e.$can("product","edit")||e.$can("product","create")?r("div",{staticClass:"dply-felx j-right"},[r("ajax-button",{staticClass:"primary-btn mr-10",attrs:{name:"save-edit",text:"Save & edit","fetching-data":e.formSubmitting&&!e.redirect}}),e._v(" "),r("ajax-button",{staticClass:"primary-btn",attrs:{name:"save",text:"Save","fetching-data":e.formSubmitting&&e.redirect}})],1):e._e()])],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{ErrorFormatter:r(346).default,AjaxButton:r(343).default})},566:function(e,t,r){"use strict";r.r(t);r(29),r(82),r(234),r(583),r(8),r(588),r(590),r(591),r(592),r(593),r(594),r(595),r(596),r(597),r(598),r(599),r(600),r(601),r(602),r(603),r(605),r(606),r(607),r(608),r(609),r(610),r(611),r(612),r(613),r(45),r(46),r(614),r(235);var n=r(343),o=r(59),l=r(352),c={name:"VideoUpload",data:function(){return{scaleFactor:"",uploadMessage:null}},mixins:[o.a,l.a],components:{AjaxButton:n.default},props:{type:{type:String,default:"image"},fileUploading:{type:Boolean,default:!1},video:{type:String,default:""},image:{type:String,default:""},imageTitle:{type:String,default:""},btnText:{type:String,default:"Upload"}},computed:{isImage:function(){return"image"===this.type},errors:function(){return this.ERRORS&&this.ERRORS[this.type]},videoName:function(){return this.video||""},imageName:function(){var e;return null!==(e=this.image)&&void 0!==e?e:this.defaultImage}},methods:{dataURLtoFile:function(e,t){for(var r=e.split(","),n=r[0].match(/:(.*?);/)[1],o=atob(r[1]),l=o.length,c=new Uint8Array(l);l--;)c[l]=o.charCodeAt(l);return new File([c],t,{type:n})},capture:function(e){var video=document.getElementById("video");document.getElementById("source").src=URL.createObjectURL(e),video.load();var t=this;video.addEventListener("loadeddata",(function(){var r=this.videoWidth,n=this.videoHeight,canvas=document.createElement("canvas");canvas.width=r,canvas.height=n,canvas.getContext("2d").drawImage(this,0,0,r,n);var o=canvas.toDataURL("image/jpeg"),l={canvas:canvas,file:t.dataURLtoFile(o,"".concat(+new Date,".jpg")),base64:o};t.$emit("file-upload",{video:e,thumb:l.file})}))},fileChanged:function(e){var t=e.target.files[0];t&&(this.uploadMessage=this.isValidImage(t,this.maxVideoSize,!1),this.uploadMessage||this.capture(t))}}},d=r(14),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"file-wrapper",class:{"has-error":e.uploadMessage}},[r("div",{staticClass:"file-input",class:{"pt-0":!e.isImage}},[r("input",{ref:"fileInput",attrs:{type:"file"},on:{change:e.fileChanged}}),e._v(" "),e.isImage?r("img",{attrs:{src:e.getImageURL(e.imageName),alt:e.imageTitle}}):r("div",[e.videoName?r("video",{attrs:{controls:"",autostart:"0"}},[r("source",{attrs:{src:e.getVideoURL(e.videoName),type:"video/mp4"}})]):r("div",[e._v("\n        No Video\n      ")])]),e._v(" "),e._m(0)]),e._v(" "),e.uploadMessage?r("span",{staticClass:"error mb-10"},[e._v("\n    "+e._s(e.uploadMessage)+"\n  ")]):e._e(),e._v(" "),r("ajax-button",{staticClass:"outline-btn",attrs:{type:"button",text:e.btnText,color:"primary","loading-text":"Uploading","fetching-data":e.fileUploading},on:{clicked:function(t){return e.$refs.fileInput.click()}}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("video",{staticStyle:{height:"0",width:"0",opacity:"0"},attrs:{id:"video",controls:"",autoplay:""}},[t("source",{attrs:{id:"source",type:"video/mp4"}})])}],!1,null,null,null);t.default=component.exports;installComponents(component,{AjaxButton:r(343).default})},567:function(e,t,r){"use strict";r.r(t);r(100);var n=r(343),o={name:"VideoInput",data:function(){return{videoThumbData:null,videoData:null}},mixins:[r(59).a],components:{AjaxButton:n.default},props:{saving:{type:Boolean,default:!1},videoThumb:{type:String,default:""},video:{type:String,default:""}},watch:{videoThumb:function(e){this.videoThumbData=e},video:function(e){this.$refs.videoRef.src=e,this.$refs.videoRef.play(),this.videoData=e}},computed:{thumbImageName:function(){var e;return null!==(e=this.videoThumbData)&&void 0!==e&&e.trim()?this.videoThumb:this.defaultImage}},methods:{},mounted:function(){this.videoData=this.video,this.videoThumbData=this.videoThumb}},l=r(14),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"image-url-wrap file-wrapper"},[r("h5",[e._v("Video Thumb Image")]),e._v(" "),r("div",{staticClass:"file-input"},[r("img",{attrs:{src:e.thumbImageName}})]),e._v(" "),r("h5",[e._v("Video")]),e._v(" "),r("div",{staticClass:"file-input"},[r("video",{ref:"videoRef",attrs:{src:"",id:"video-container",width:"100%",controls:""}})]),e._v(" "),r("div",{staticClass:"input-wrapper"},[r("label",[e._v("Video thumb name/URL")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.videoThumbData,expression:"videoThumbData"}],attrs:{type:"text",placeholder:"Video thumb name/URL"},domProps:{value:e.videoThumbData},on:{input:function(t){t.target.composing||(e.videoThumbData=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"input-wrapper"},[r("label",[e._v("Video name/URL")]),e._v(" "),r("div",{staticClass:"image-input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.videoData,expression:"videoData"}],attrs:{type:"text",placeholder:"File name/URL"},domProps:{value:e.videoData},on:{input:function(t){t.target.composing||(e.videoData=t.target.value)}}}),e._v(" "),r("ajax-button",{staticClass:"primary-btn",attrs:{type:"button",text:"Save","loading-text":"","fetching-data":e.saving},on:{clicked:function(t){return e.$emit("image-change",{video:e.videoData,thumb:e.videoThumbData})}}})],1)])])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{AjaxButton:r(343).default})},634:function(e,t,r){"use strict";r.r(t);r(21),r(20),r(22),r(27),r(28);var n=r(3),o=r(6),l=(r(8),r(17),r(367),r(23),r(44)),c=r(11),d=r(343),v=r(59),m=r(352),f=r(346),h=r(349),_=r(360);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w={name:"ProductImages",data:function(){return{imageData:"",uploading:!1,deleting:!1,errors:null}},props:{productImages:{type:Array,default:function(){return[]}}},mixins:[v.a,m.a],components:{ImageInput:_.default,LazyImage:h.default,AjaxButton:d.default,ErrorFormatter:f.default,Spinner:l.default},computed:x({id:function(){return this.$route.params.id}},Object(c.c)(["mediaStorage"])),methods:x(x({imageDelete:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!confirm("Do you really want to delete?")){r.next=13;break}return r.prev=1,t.deleting=!0,r.next=5,t.deleteData({params:e,api:"deleteProductImage"});case 5:(data=r.sent)&&(console.log(data),t.$emit("result",data)),t.deleting=!1,r.next=13;break;case 10:return r.prev=10,r.t0=r.catch(1),r.abrupt("return",t.$nuxt.error(r.t0));case 13:case"end":return r.stop()}}),r,null,[[1,10]])})))()},uploadProductImages:function(e){var t=arguments,r=this;return Object(n.a)(regeneratorRuntime.mark((function n(){var o,l,c,d,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:null,l={},e?(c=e.target.files,(d=new FormData).append("id",r.id),d.append("product_id",r.id),Object.values(c).forEach((function(e){d.append("images[]",e),r.errors=r.isValidImage(e),r.errors})),r.setErrors({multiple_image:[r.errors]}),l=d):(l.photo=o,l.product_id=r.id,l.id=r.id),r.errors){n.next=19;break}return n.prev=4,r.uploading=!0,n.next=8,r.setImageById({id:r.id,params:l,api:"setProductImages"});case 8:if(!(data=n.sent)){n.next=13;break}return n.next=12,r.$emit("result",data);case 12:r.imageData="";case 13:r.uploading=!1,n.next=19;break;case 16:return n.prev=16,n.t0=n.catch(4),n.abrupt("return",r.$nuxt.error(n.t0));case 19:case"end":return n.stop()}}),n,null,[[4,16]])})))()}},Object(c.b)("common",["setImageById","deleteData"])),Object(c.b)("ui",["setErrors"]))},C=w,k=r(14),component=Object(k.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-20 p-sm-15 pos-rel"},[e.deleting?r("div",{staticClass:"spinner-wrapper"},[r("spinner",{staticClass:"mr-15",attrs:{radius:60,color:"primary"}})],1):e._e(),e._v(" "),r("input",{ref:"filesInput",staticClass:"d-none",attrs:{type:"file",multiple:""},on:{change:e.uploadProductImages}}),e._v(" "),r("error-formatter",{attrs:{type:"multiple_image"}}),e._v(" "),r("div",{staticClass:"product-images dply-felx mb-15"},[e.productImages.length?e._e():r("p",{staticClass:"mlr-5"},[e._v("\n      No image found\n    ")]),e._v(" "),e._l(e.productImages,(function(t,n){return r("div",{key:n,staticClass:"w-50"},[r("div",{staticClass:"img-wrapper"},[r("lazy-image",{attrs:{"data-src":e.getThumbImageURL(t.image)}}),e._v(" "),e.$can("product","edit")||e.$can("product","create")?r("button",{on:{click:function(r){return r.preventDefault(),e.imageDelete(t.id)}}},[e._v("✖\n        ")]):e._e()],1)])}))],2),e._v(" "),e.$can("product","edit")||e.$can("product","create")?r("div",[e.mediaStorageData.URL===e.mediaStorage?r("div",{staticClass:"input-wrapper"},[r("label",{staticClass:"mb-10"},[e._v("Add image name/URL")]),e._v(" "),r("div",{staticClass:"image-input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.imageData,expression:"imageData"}],staticClass:"mb-10",attrs:{type:"text",placeholder:"Image name"},domProps:{value:e.imageData},on:{input:function(t){t.target.composing||(e.imageData=t.target.value)}}}),e._v(" "),r("ajax-button",{staticClass:"primary-btn",attrs:{type:"button",text:"Save","loading-text":"","fetching-data":e.uploading},on:{clicked:function(t){return e.uploadProductImages(null,e.imageData)}}})],1)]):r("ajax-button",{staticClass:"outline-btn w-100 centered",attrs:{type:"button",color:"primary",text:"Upload Images","loading-text":"Uploading","fetching-data":e.uploading},on:{clicked:function(t){return e.$refs.filesInput.click()}}})],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Spinner:r(44).default,ErrorFormatter:r(346).default,LazyImage:r(349).default,AjaxButton:r(343).default})},761:function(e,t,r){"use strict";r.r(t);r(22),r(27),r(28);var n=r(513),o=r(3),l=r(6),c=(r(23),r(80),r(29),r(62),r(21),r(230),r(40),r(8),r(525),r(45),r(526),r(527),r(528),r(529),r(530),r(531),r(532),r(533),r(534),r(535),r(536),r(537),r(538),r(539),r(540),r(541),r(46),r(54),r(17),r(20),r(66),r(11)),d=r(346),v=r(520),m=r(634),f=r(358),h=r(566),_=r(372),y=r(343),x=r(553),w=r(357),C=r(344),k=r(44),O=r(59),S=r(360),j=r(567);function I(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):I(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var D={name:"product",middleware:["auth"],data:function(){return{routeName:"products",getApi:"getProduct",setApi:"setProduct",setImageApi:"setProductImage",setVideoApi:"setProductVideo",fileKeys:["id","category_id","tax_rule_id","shipping_rule_id"],validationKeys:["title"],result:{id:"",title:"",tags:",",overview:"",description:"",status:"2",brand_id:"",category_id:"",bundle_deal_id:"",unit:"",badge:"",subcategory_id:"",tax_rule_id:"",shipping_rule_id:"",purchased:"",selling:"",offered:"",refundable:1,warranty:1,meta_description:"",flash_sale_product:"",meta_title:"",image:"",video:"",product_images:[],product_collections:[]},hasError:!1,loading:!1,formSubmitting:!1,redirect:!1,fileUploading:!1,videoUploading:!1}},mixins:[O.a],components:{VideoInput:j.default,ImageInput:S.default,DataPage:w.default,Dropdown:C.default,WYSIWYGEditor:v.default,ProductImages:m.default,FileUpload:f.default,VideoUpload:h.default,TagSearch:_.default,AjaxButton:y.default,ProductInventory:x.default,ErrorFormatter:d.default,Spinner:k.default},computed:A(A(A({currencyPosition:function(){var e;return null===(e=this.setting)||void 0===e?void 0:e.currency_position},currentPrice:function(){return this.result.offered>0?this.result.offered:this.result.selling>0?this.result.selling:0},selectedSubCategories:function(){var e;return this.allSubWithCategories&&null!==(e=this.result)&&void 0!==e&&e.category_id?this.allSubWithCategories[this.result.category_id]:null},id:function(){var e,t;return this.isAdding?"":null===(e=this.$route)||void 0===e||null===(t=e.params)||void 0===t?void 0:t.id},isAdding:function(){var e,t;return isNaN(null===(e=this.$route)||void 0===e||null===(t=e.params)||void 0===t?void 0:t.id)},currencyIcon:function(){var e;return(null===(e=this.setting)||void 0===e?void 0:e.currency_icon)||"$"}},Object(c.c)(["mediaStorage"])),Object(c.c)("setting",["setting"])),Object(c.c)("common",["allCategories","allSubWithCategories","allTaxRules","allAttributes","allBrands","allProductCollections","allBundleDeals","allShippingRules"])),methods:A({productImages:function(e){var t=this;this.result.product_images=[],this.$nextTick((function(){t.result.product_images=e}))},imageInputChanged:function(e){this.uploadFile(null,e)},addTag:function(e){this.result.tags||(this.result.tags=","),this.result.tags="".concat(this.result.tags).concat(e,",")},deleteTag:function(e){this.result.tags=this.result.tags.replace("".concat(e,","),"")},dropdownSelected:function(data){this.result.status=data.key},categorySelected:function(data){this.result.category_id=data.key,this.selectedSubCategories?this.result.subcategory_id=Object.keys(this.selectedSubCategories)[0]:this.result.subcategory_id=""},subCategorySelected:function(data){this.result.subcategory_id=data.key},taxRuleSelected:function(data){this.result.tax_rule_id=data.key},shippingRuleSelected:function(data){this.result.shipping_rule_id=data.key},brandSelected:function(data){this.result.brand_id=data.key},bundleDealSelected:function(data){this.result.bundle_deal_id=data.key},redirectingEnable:function(e){this.redirect="save"===e},checkForm:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var data,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.validationKeys.findIndex((function(i){return!e.result[i]}))>-1)){t.next=3;break}return e.hasError=!0,t.abrupt("return",!1);case 3:return e.redirectingEnable(event.submitter.name),e.formSubmitting=!0,t.prev=5,delete e.result.created_at,delete e.result.updated_at,t.next=10,e.setById({id:e.id,params:e.result,api:e.setApi});case 10:(data=t.sent)?(e.result=Object.assign({},data),e.result.product_collections=Object(n.a)(new Set(null===(r=e.result)||void 0===r||null===(o=r.product_collections)||void 0===o?void 0:o.map((function(e){return e.product_collection_id})))),e.$router.push({path:"/".concat(e.routeName).concat(e.redirect?"":"/"+e.result.id)})):e.scrollToTop(),t.next=17;break;case 14:return t.prev=14,t.t0=t.catch(5),t.abrupt("return",e.$nuxt.error(t.t0));case 17:e.formSubmitting=!1;case 18:case"end":return t.stop()}}),t,null,[[5,14]])})))()},scrollToTop:function(){this.$refs.productForm.scrollIntoView({behavior:"smooth"})},fetchingData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.t0=Object,t.t1={},t.next=6,e.getById({id:e.id,params:{},api:e.getApi});case 6:t.t2=t.sent,e.result=t.t0.assign.call(t.t0,t.t1,t.t2),e.result.product_collections=Object(n.a)(new Set(null===(r=e.result)||void 0===r||null===(o=r.product_collections)||void 0===o?void 0:o.map((function(e){return e.product_collection_id})))),e.loading=!1,t.next=15;break;case 12:return t.prev=12,t.t3=t.catch(0),t.abrupt("return",e.$nuxt.error(t.t3));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},uploadVideo:function(e){var t=arguments,r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var video,l,c,data,d,v;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return video=t.length>1&&void 0!==t[1]?t[1]:null,r.videoUploading=!0,o.prev=2,l={},e?(c=new FormData,r.fileKeys.forEach((function(i){c.append(i,r.result[i])})),c.append("video_file",e.video),c.append("thumb",e.thumb),l=c):(r.fileKeys.forEach((function(i){l[i]=r.result[i]})),l.video_file=video.video,l.thumb=video.thumb),o.next=7,r.setImageById({id:r.id,params:l,api:r.setVideoApi});case 7:if(!(data=o.sent)){o.next=13;break}return r.result=Object.assign({},data),r.result.product_collections=Object(n.a)(new Set(null===(d=r.result)||void 0===d||null===(v=d.product_collections)||void 0===v?void 0:v.map((function(e){return e.product_collection_id})))),o.next=13,r.$router.push({path:"/".concat(r.routeName,"/").concat(r.result.id)});case 13:o.next=18;break;case 15:return o.prev=15,o.t0=o.catch(2),o.abrupt("return",r.$nuxt.error(o.t0));case 18:r.videoUploading=!1;case 19:case"end":return o.stop()}}),o,null,[[2,15]])})))()},uploadFile:function(e){var t=arguments,r=this;return Object(o.a)(regeneratorRuntime.mark((function o(){var l,c,d,data,v,m;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l=t.length>1&&void 0!==t[1]?t[1]:null,r.fileUploading=!0,o.prev=2,c={},e?(d=new FormData,r.fileKeys.forEach((function(i){d.append(i,r.result[i])})),d.append("photo",e),c=d):(r.fileKeys.forEach((function(i){c[i]=r.result[i]})),c.photo=l),o.next=7,r.setImageById({id:r.id,params:c,api:r.setImageApi});case 7:if(!(data=o.sent)){o.next=13;break}return r.result=Object.assign({},data),r.result.product_collections=Object(n.a)(new Set(null===(v=r.result)||void 0===v||null===(m=v.product_collections)||void 0===m?void 0:m.map((function(e){return e.product_collection_id})))),o.next=13,r.$router.push({path:"/".concat(r.routeName,"/").concat(r.result.id)});case 13:o.next=18;break;case 15:return o.prev=15,o.t0=o.catch(2),o.abrupt("return",r.$nuxt.error(o.t0));case 18:r.fileUploading=!1;case 19:case"end":return o.stop()}}),o,null,[[2,15]])})))()},editorDescriptionFile:function(e){var t=e.deleted,r=e.file,n=e.Editor,o=e.cursorLocation,l=e.resetUploader;this.editorFile({deleted:t,file:r,Editor:n,cursorLocation:o,resetUploader:l},this.wysiwygType.PRODUCT_DESCRIPTION)},editorOverviewFile:function(e){var t=e.deleted,r=e.file,n=e.Editor,o=e.cursorLocation,l=e.resetUploader;this.editorFile({deleted:t,file:r,Editor:n,cursorLocation:o,resetUploader:l},this.wysiwygType.PRODUCT_OVERVIEW)},editorFile:function(e,t){var r=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,l,c,d,v,m,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.deleted,l=e.file,c=e.Editor,d=e.cursorLocation,v=e.resetUploader,o){n.next=27;break}return r.loading=!0,n.prev=3,m=new FormData,r.result.id?(m.append("overview",r.result.overview),m.append("description",r.result.description),m.append("item_id",r.result.id)):m.append("product",JSON.stringify(r.result)),m.append("type",t),m.append("photo",l),n.next=10,r.setWysiwygImage(m);case 10:if(!(data=n.sent)){n.next=19;break}if(r.result.id){n.next=17;break}return n.next=15,r.$router.push({path:"/".concat(r.routeName,"/").concat(data.item_id)});case 15:n.next=19;break;case 17:c.insertEmbed(d,"image",data.url),v();case 19:n.next=24;break;case 21:return n.prev=21,n.t0=n.catch(3),n.abrupt("return",r.$nuxt.error(n.t0));case 24:r.loading=!1,n.next=37;break;case 27:return r.loading=!0,n.prev=28,n.next=31,r.deleteData({params:r.getImageName(l),api:"deleteWysiwygImage"});case 31:n.next=36;break;case 33:return n.prev=33,n.t1=n.catch(28),n.abrupt("return",r.$nuxt.error(n.t1));case 36:r.loading=!1;case 37:case"end":return n.stop()}}),n,null,[[3,21],[28,33]])})))()}},Object(c.b)("common",["getById","setById","setImageById","getDropdownList","setWysiwygImage","deleteData"])),mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isAdding){t.next=3;break}return t.next=3,e.fetchingData();case 3:if(e.allCategories&&e.allSubWithCategories&&e.allTaxRules&&e.allAttributes&&e.allBrands&&e.allProductCollections&&e.allBundleDeals&&e.allShippingRules){t.next=14;break}return e.loading=!0,t.prev=5,t.next=8,e.getDropdownList();case 8:t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(5),t.abrupt("return",e.$nuxt.error(t.t0));case 13:e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[5,10]])})))()}},P=D,E=r(14),component=Object(E.a)(P,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"product-form"},[e.loading?r("div",{staticClass:"spinner-wrapper"},[r("spinner",{staticClass:"mr-15",attrs:{radius:60,color:"primary"}})],1):e._e(),e._v(" "),r("div",{staticClass:"right-area"},[r("div",{staticClass:"sticky"},[r("div",{staticClass:"tab-sidebar mb-20 mb-lg mb-md-15"},[e._m(0),e._v(" "),e.$can("product","edit")||e.$can("product","create")?r("div",{staticClass:"form-wrapper"},[r("error-formatter",{attrs:{type:"video"}}),e._v(" "),e.mediaStorageData.URL===e.mediaStorage?r("video-input",{attrs:{saving:e.videoUploading,video:e.result.video,"video-thumb":e.result.video_thumb},on:{"image-change":function(t){return e.uploadVideo(null,t)}}}):r("video-upload",{staticClass:"upload-block",attrs:{video:e.result.video,type:"video","file-uploading":e.videoUploading},on:{"file-upload":e.uploadVideo}})],1):e.$can("product","view")?r("div",{staticClass:"ptb-15 plr-20"},[e.result.video?r("video",{attrs:{controls:"",autoplay:""}},[r("source",{attrs:{src:e.getVideoURL(e.result.video),type:"video/mp4"}})]):r("div",[e._v("\n            No Video\n          ")])]):e.result.video&&e.$can("product","view")?r("video",{attrs:{controls:"",autoplay:""}},[r("source",{attrs:{src:e.getVideoURL(e.result.video),type:"video/mp4"}})]):e._e()]),e._v(" "),r("div",{staticClass:"tab-sidebar mb-20 mlr-lg-15 mlr-md mb-md-15"},[e._m(1),e._v(" "),e.loading?e._e():r("div",[e.$can("product","edit")||e.$can("product","create")?r("div",{staticClass:"form-wrapper upload-block"},[r("error-formatter",{attrs:{type:"image"}}),e._v(" "),e.mediaStorageData.URL===e.mediaStorage?r("image-input",{attrs:{saving:e.fileUploading,image:e.result.image},on:{"image-change":e.imageInputChanged}}):r("file-upload",{staticClass:"upload-block",attrs:{image:e.result.image,"file-uploading":e.fileUploading},on:{"file-upload":e.uploadFile}})],1):e.$can("product","view")?r("img",{staticClass:"mx-w-300x",attrs:{src:e.getImageURL(e.result.image)}}):e._e()])]),e._v(" "),e.isAdding?e._e():r("div",{staticClass:"tab-sidebar mb-md-15"},[e._m(2),e._v(" "),r("product-images",{attrs:{"product-images":e.result.product_images},on:{result:e.productImages}})],1)])]),e._v(" "),r("div",{ref:"productForm",staticClass:"left-area"},[r("div",{staticClass:"tab-sidebar"},[r("h4",{staticClass:"title"},[e._v("Product Form")]),e._v(" "),r("form",{staticClass:"form-wrapper",class:{"has-error":e.hasError},on:{submit:function(t){return t.preventDefault(),e.checkForm.apply(null,arguments)}}},[r("error-formatter"),e._v(" "),r("div",{staticClass:"input-wrapper"},[r("label",[e._v("Title")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.title,expression:"result.title"}],class:{invalid:!e.result.title&&e.hasError},attrs:{type:"text",placeholder:"Title"},domProps:{value:e.result.title},on:{input:function(t){t.target.composing||e.$set(e.result,"title",t.target.value)}}}),e._v(" "),!e.result.title&&e.hasError?r("span",{staticClass:"error"},[e._v("Title is required")]):e._e()]),e._v(" "),e._l(e.result.flash_sale_product,(function(t,n){return r("div",{key:n,staticClass:"info-msg mb-20 mb-sm-15"},[r("p",[e._v("\n            This product is assigned in flash sale ("),r("nuxt-link",{staticClass:"link",attrs:{to:"/flash-sales/"+t.flash_sale.id}},[e._v("\n            "+e._s(t.flash_sale.title)+"\n          ")]),e._v(").\n          ")],1),e._v(" "),r("p",[e._v("Flash sale price: "),r("b",[e._v(e._s(e.priceFormatting(t.price)))])]),e._v(" "),r("p",[e._v("Max. quantity: "),r("b",[e._v(e._s(t.quantity))])])])})),e._v(" "),r("div",{staticClass:"dply-felx mlr--7-5 inputs"},[r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",[e._v("Purchased("+e._s(e.currencyIcon)+")")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.purchased,expression:"result.purchased"}],class:{invalid:(e.result.purchased<1||!e.result.purchased)&&e.hasError},attrs:{type:"number",step:"any",placeholder:"Purchased Price"},domProps:{value:e.result.purchased},on:{input:function(t){t.target.composing||e.$set(e.result,"purchased",t.target.value)}}}),e._v(" "),(e.result.purchased<1||!e.result.purchased)&&e.hasError?r("span",{staticClass:"error"},[e._v("Price is required")]):e._e()]),e._v(" "),r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",[e._v("Selling("+e._s(e.currencyIcon)+")")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.selling,expression:"result.selling"}],class:{invalid:(e.result.selling<1||!e.result.selling)&&e.hasError},attrs:{type:"number",step:"any",placeholder:"Selling Price"},domProps:{value:e.result.selling},on:{input:function(t){t.target.composing||e.$set(e.result,"selling",t.target.value)}}}),e._v(" "),(e.result.selling<1||!e.result.selling)&&e.hasError?r("span",{staticClass:"error"},[e._v("Price is required")]):e._e()]),e._v(" "),r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",[e._v("Offered("+e._s(e.currencyIcon)+")")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.offered,expression:"result.offered"}],attrs:{type:"number",step:"any",placeholder:"Offered Price"},domProps:{value:e.result.offered},on:{input:function(t){t.target.composing||e.$set(e.result,"offered",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"dply-felx inputs mlr--7-5"},[r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",{staticClass:"block"},[e._v("Category")]),e._v(" "),e.allCategories?r("dropdown",{attrs:{selectedKey:e.result.category_id,options:e.allCategories},on:{clicked:e.categorySelected}}):e._e(),e._v(" "),!e.result.category_id&&e.hasError?r("span",{staticClass:"error"},[e._v("Category is required")]):e._e()],1),e._v(" "),e.selectedSubCategories?r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",{staticClass:"block"},[e._v("Sub Category")]),e._v(" "),r("dropdown",{attrs:{selectedKey:e.result.subcategory_id,options:e.selectedSubCategories},on:{clicked:e.subCategorySelected}})],1):e._e()]),e._v(" "),r("div",{staticClass:"dply-felx inputs mlr--7-5"},[r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",[e._v("Unit")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.unit,expression:"result.unit"}],class:{invalid:!e.result.unit&&e.hasError},attrs:{type:"text",placeholder:"Unit"},domProps:{value:e.result.unit},on:{input:function(t){t.target.composing||e.$set(e.result,"unit",t.target.value)}}}),e._v(" "),!e.result.unit&&e.hasError?r("span",{staticClass:"error"},[e._v("Unit is required")]):e._e()]),e._v(" "),r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",[e._v("Badge")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.badge,expression:"result.badge"}],attrs:{type:"text",placeholder:"Badge"},domProps:{value:e.result.badge},on:{input:function(t){t.target.composing||e.$set(e.result,"badge",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"input-wrapper",class:{"whysigwyg-error":!e.result.overview&&e.hasError}},[r("WYSIWYGEditor",{attrs:{title:"Overview",description:e.result.overview},on:{change:function(t){e.result.overview=t},file:e.editorOverviewFile}}),e._v(" "),!e.result.overview&&e.hasError?r("span",{staticClass:"error"},[e._v("\n            Overview is required\n          ")]):e._e()],1),e._v(" "),r("div",{staticClass:"input-wrapper",class:{"whysigwyg-error":!e.result.description&&e.hasError}},[r("WYSIWYGEditor",{attrs:{description:e.result.description},on:{change:function(t){e.result.description=t},file:e.editorDescriptionFile}}),e._v(" "),!e.result.description&&e.hasError?r("span",{staticClass:"error"},[e._v("\n            Description is required\n          ")]):e._e()],1),e._v(" "),r("div",{staticClass:"dply-felx inputs mlr--7-5"},[r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",{staticClass:"block"},[e._v("Status")]),e._v(" "),r("dropdown",{attrs:{selectedKey:""+e.result.status,options:e.statusObj},on:{clicked:e.dropdownSelected}})],1),e._v(" "),r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",{staticClass:"block"},[e._v("Brand")]),e._v(" "),e.allBrands?r("dropdown",{attrs:{"default-null":!0,selectedKey:e.result.brand_id,options:e.allBrands},on:{clicked:e.brandSelected}}):e._e()],1)]),e._v(" "),r("div",{staticClass:"input-wrapper"},[r("label",[e._v("Tags (Optional)")]),e._v(" "),r("tag-search",{attrs:{tags:e.result.tags},on:{add:e.addTag,delete:e.deleteTag}})],1),e._v(" "),r("div",{staticClass:"f-wrap dply-felx inputs mlr--7-5"},[r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",{staticClass:"block"},[e._v("Tax")]),e._v(" "),e.allTaxRules?r("dropdown",{attrs:{selectedKey:e.result.tax_rule_id,options:e.allTaxRules},on:{clicked:e.taxRuleSelected}}):e._e(),e._v(" "),!e.result.tax_rule_id&&e.hasError?r("span",{staticClass:"error"},[e._v("\n              Tax rule is required\n            ")]):e._e()],1),e._v(" "),r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",{staticClass:"block"},[e._v("Shipping")]),e._v(" "),e.allShippingRules?r("dropdown",{attrs:{selectedKey:e.result.shipping_rule_id,options:e.allShippingRules},on:{clicked:e.shippingRuleSelected}}):e._e(),e._v(" "),!e.result.shipping_rule_id&&e.hasError?r("span",{staticClass:"error"},[e._v("\n              Shipping rule is required\n            ")]):e._e()],1),e._v(" "),r("div",{staticClass:"input-wrapper mlr-7-5"},[r("label",{staticClass:"block"},[e._v("Bundle Deal")]),e._v(" "),e.allBundleDeals?r("dropdown",{attrs:{"default-null":!0,selectedKey:e.result.bundle_deal_id,options:e.allBundleDeals},on:{clicked:e.bundleDealSelected}}):e._e()],1)]),e._v(" "),r("div",{staticClass:"mb-10 mb-sm-5 cb-wrapper"},[r("span",{staticClass:"block mb-10"},[e._v("Product Collection")]),e._v(" "),e._l(e.allProductCollections,(function(t,n){return r("label",{key:n,staticClass:"mr-15 mb-10"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.product_collections,expression:"result.product_collections"}],attrs:{type:"checkbox"},domProps:{value:t.id,checked:Array.isArray(e.result.product_collections)?e._i(e.result.product_collections,t.id)>-1:e.result.product_collections},on:{change:function(r){var n=e.result.product_collections,o=r.target,l=!!o.checked;if(Array.isArray(n)){var c=t.id,d=e._i(n,c);o.checked?d<0&&e.$set(e.result,"product_collections",n.concat([c])):d>-1&&e.$set(e.result,"product_collections",n.slice(0,d).concat(n.slice(d+1)))}else e.$set(e.result,"product_collections",l)}}}),e._v("\n            "+e._s(t.title)+"\n          ")])}))],2),e._v(" "),r("div",{staticClass:"mb-20 mb-sm-15 cb-wrapper"},[r("span",{staticClass:"block mb-10"},[e._v("Product Info")]),e._v(" "),r("p",[r("label",{staticClass:"mr-15"},[e._v("\n              Refundable\n            ")]),e._v(" "),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.refundable,expression:"result.refundable"}],attrs:{type:"radio",name:"refundable",value:"1"},domProps:{checked:e._q(e.result.refundable,"1")},on:{change:function(t){return e.$set(e.result,"refundable","1")}}}),e._v("\n              Yes\n            ")]),e._v(" "),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.refundable,expression:"result.refundable"}],attrs:{type:"radio",name:"refundable",value:"2"},domProps:{checked:e._q(e.result.refundable,"2")},on:{change:function(t){return e.$set(e.result,"refundable","2")}}}),e._v("\n              No\n            ")])]),e._v(" "),r("p",[r("label",{staticClass:"mr-15"},[e._v("\n              Warranty\n            ")]),e._v(" "),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.warranty,expression:"result.warranty"}],attrs:{type:"radio",name:"warranty",value:"1"},domProps:{checked:e._q(e.result.warranty,"1")},on:{change:function(t){return e.$set(e.result,"warranty","1")}}}),e._v("\n              Yes\n            ")]),e._v(" "),r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.warranty,expression:"result.warranty"}],attrs:{type:"radio",name:"warranty",value:"2"},domProps:{checked:e._q(e.result.warranty,"2")},on:{change:function(t){return e.$set(e.result,"warranty","2")}}}),e._v("\n              No\n            ")])])]),e._v(" "),r("div",{staticClass:"input-wrapper"},[r("label",[e._v("Meta Title")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.result.meta_title,expression:"result.meta_title"}],class:{invalid:!e.result.meta_title&&e.hasError},attrs:{type:"text",placeholder:"Meta Title"},domProps:{value:e.result.meta_title},on:{input:function(t){t.target.composing||e.$set(e.result,"meta_title",t.target.value)}}}),e._v(" "),!e.result.meta_title&&e.hasError?r("span",{staticClass:"error"},[e._v("\n            Meta title is required\n          ")]):e._e()]),e._v(" "),r("div",{staticClass:"input-wrapper"},[r("label",[e._v("Meta Description")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.result.meta_description,expression:"result.meta_description"}],class:{invalid:!e.result.meta_description&&e.hasError},attrs:{placeholder:"Meta Description"},domProps:{value:e.result.meta_description},on:{input:function(t){t.target.composing||e.$set(e.result,"meta_description",t.target.value)}}}),e._v(" "),!e.result.meta_description&&e.hasError?r("span",{staticClass:"error"},[e._v("Description is required")]):e._e()]),e._v(" "),e.$can("product","edit")||e.$can("product","create")?r("div",{staticClass:"dply-felx j-right"},[r("ajax-button",{staticClass:"primary-btn mr-15",attrs:{name:"save-edit",text:"Save & edit","fetching-data":e.formSubmitting&&!e.redirect}}),e._v(" "),r("ajax-button",{staticClass:"primary-btn",attrs:{name:"save",text:"Save","fetching-data":e.formSubmitting&&e.redirect}})],1):e._e()],2)]),e._v(" "),e.isAdding?e._e():r("div",{staticClass:"tab-sidebar mt-15"},[r("h5",{staticClass:"title"},[e._v("Product Inventory")]),e._v(" "),e.currentPrice?r("product-inventory",{attrs:{attributes:e.allAttributes,"product-price":parseFloat(e.currentPrice)},on:{"has-error":e.scrollToTop}}):e._e()],1)])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h4",{staticClass:"title"},[r("span",{staticClass:"mr-5"},[e._v("Preview Video")]),e._v(" "),r("span",{staticClass:"fw-400 f-8"},[e._v("(Max size: 2mb)")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h4",{staticClass:"title"},[r("span",{staticClass:"mr-5"},[e._v("Preview Image")]),e._v(" "),r("span",{staticClass:"fw-400 f-8"},[e._v("(Suggested 1:1)")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h4",{staticClass:"title"},[r("span",{staticClass:"mr-5"},[e._v("Product Images")]),e._v(" "),r("span",{staticClass:"fw-400 f-8"},[e._v("(Suggested 1:1)")])])}],!1,null,"1de9563a",null);t.default=component.exports;installComponents(component,{Spinner:r(44).default,ErrorFormatter:r(346).default,VideoInput:r(567).default,VideoUpload:r(566).default,ImageInput:r(360).default,FileUpload:r(358).default,Dropdown:r(344).default,WYSIWYGEditor:r(520).default,TagSearch:r(372).default,AjaxButton:r(343).default})}}]);