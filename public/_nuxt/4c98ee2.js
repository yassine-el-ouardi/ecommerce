(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{484:function(t,e,r){"use strict";r.r(e);r(22),r(19),r(23),r(28),r(29);var c=r(9),n=(r(6),r(20),r(34)),o=r(10),l=r(453),h=r(198),d=r(281),f=r(153);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var m={name:"CheckoutRight",data:function(){return{voucher:""}},watch:{},props:{checkedProduct:{type:Array},btnText:{type:String,default:function(){return this.$t("checkoutRight.proceedToCheckout")}},hasShipping:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},submitting:{type:Boolean,default:!1},hideBtn:{type:Boolean,default:!1},voucherResult:{type:Object,default:function(){return null}}},components:{PriceFormat:f.default,AjaxButton:d.default},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({totalPrice:function(){return this.cartPrice.totalPriceWithOffer+this.cartPrice.shippingPrice-this.cartPrice.voucher+this.cartPrice.tax},cartPrice:function(){var t,e=this,r={totalItems:0,totalPriceWithOffer:0,totalPrice:0,tax:0,shippingPrice:0,voucher:0};return this.checkedProduct.forEach((function(t){var c,n,o;if(1===parseInt(t.shipping_type)&&e.hasShipping)r.shippingPrice+=parseInt((null==t||null===(o=t.shipping_place)||void 0===o?void 0:o.price)||0);else if(2===parseInt(t.shipping_type)&&e.hasShipping){var l;r.shippingPrice+=parseInt((null==t||null===(l=t.shipping_place)||void 0===l?void 0:l.pickup_price)||0)}var h=parseInt((null==t?void 0:t.quantity)||0),d=null==t||null===(c=t.flash_product)||void 0===c?void 0:c.bundle_deal;r.totalItems+=h;var f=e.currentInventoryPriceCalc(null==t?void 0:t.updated_inventory,null==t?void 0:t.flash_product),v=(null==d?void 0:d.buy)<=h?f*parseInt((null==d?void 0:d.free)||0):0;r.totalPriceWithOffer+=h*f-v;var m=null==t||null===(n=t.flash_product)||void 0===n?void 0:n.tax_rules;r.tax+=h*e.priceByType(f,(null==m?void 0:m.price)||0,null==m?void 0:m.type),r.totalPrice+=h*f})),r.voucher=(null===(t=this.voucherResult)||void 0===t?void 0:t.offered)||0,this.$emit("calculated-price",r),r}},Object(o.c)("common",["currencyIcon"])),mixins:[n.a,l.a,h.a],methods:{},created:function(){},mounted:function(){}},P=m,y=r(13),component=Object(y.a)(P,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-right"},[e("div",{staticClass:"area pt-10 plr-20 plr-sm-15 pb-20 pb-sm-15"},[e("h5",{staticClass:"bold b-b pb-10 mb-15"},[t._v("Checkout")]),t._v(" "),e("div",{staticClass:"flex sided mb-15"},[e("h5",{staticClass:"fw-400"},[t._v(t._s(t.$t("checkoutRight.subtotalItems",{itemCount:t.cartPrice.totalItems})))]),t._v(" "),e("h5",{staticClass:"price"},[e("price-format",{attrs:{price:t.formatPrice(t.cartPrice.totalPrice)}})],1)]),t._v(" "),t.cartPrice.totalPrice!==t.cartPrice.totalPriceWithOffer?e("div",{staticClass:"flex sided pb-10"},[e("h5",{staticClass:"fw-400"},[t._v(t._s(t.$t("cartProductTile.bundleOffer")))]),t._v(" "),e("h5",{staticClass:"price"},[e("price-format",{attrs:{price:t.formatPrice(t.cartPrice.totalPrice-t.cartPrice.totalPriceWithOffer)}})],1)]):t._e(),t._v(" "),t.hasShipping?e("div",{staticClass:"flex sided pb-10"},[e("h5",{staticClass:"fw-400"},[t._v(t._s(t.$t("checkoutRight.shipping")))]),t._v(" "),e("h5",{staticClass:"price"},[e("price-format",{attrs:{price:t.formatPrice(t.cartPrice.shippingPrice)}})],1)]):t._e(),t._v(" "),t.voucherResult?e("div",{staticClass:"flex sided pb-10"},[e("h5",{staticClass:"fw-400"},[t._v(t._s(t.$t("checkoutRight.voucher")))]),t._v(" "),e("h5",{staticClass:"price"},[e("price-format",{attrs:{price:t.formatPrice(t.voucherResult.offered)}})],1)]):t._e(),t._v(" "),t.cartPrice.tax?e("div",{staticClass:"flex sided mb-10"},[e("h5",{staticClass:"fw-400"},[t._v(t._s(t.$t("cart.tax")))]),t._v(" "),e("h5",{staticClass:"price"},[e("price-format",{attrs:{price:t.formatPrice(t.cartPrice.tax)}})],1)]):t._e(),t._v(" "),e("div",{staticClass:"flex sided mb-20 mb-sm-15 b-t pt-10"},[e("h5",{staticClass:"fw-400"},[t._v(t._s(t.$t("checkoutRight.total")))]),t._v(" "),e("h4",{staticClass:"price"},[e("price-format",{attrs:{price:t.formatPrice(t.totalPrice)}})],1)]),t._v(" "),t.hideBtn?t._e():e("ajax-button",{staticClass:"primary-btn w-100",attrs:{type:"button","fetching-data":t.submitting,"loading-text":t.$t("checkoutRight.submitting"),disabled:t.disabled,text:t.btnText},on:{clicked:function(e){return t.$emit("go-next")}}}),t._v(" "),t._t("checkout")],2)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PriceFormat:r(153).default,AjaxButton:r(281).default})},542:function(t,e,r){"use strict";r.r(e);r(22),r(19),r(28),r(20),r(29);var c=r(0),n=r(9),o=(r(12),r(23),r(6),r(484)),l=r(486),h=r(487),d=r(34),f=r(10),v=r(453),m=r(198),P=r(475),y=r(482);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w={middleware:["auth"],head:function(){var t;return{link:[{rel:"preload",as:"script",href:"https://www.paypal.com/sdk/js?client-id=".concat(null===(t=this.paymentGateway)||void 0===t?void 0:t.paypal_key,"&components=buttons,marks&disable-funding=paylater,card")},{rel:"preload",as:"script",href:"https://checkout.flutterwave.com/v3.js"}]}},data:function(){return{loading:!1,paypaLoaded:!1,voucher:"",voucherError:null,voucherResult:null,submitting:!1,placingOrder:!1,cartPrice:0,checkedProductQty:0}},watch:{voucher:function(){this.voucherResult=null,this.voucherError=null}},components:{AjaxButton:r(281).default,PaymentGateways:y.default,RazorpayPayment:h.default,StripePayment:l.default,CheckoutRight:o.default},mixins:[d.a,v.a,P.a,m.a],computed:O(O({noPaymentMethod:function(){var t,e;return parseInt(null===(t=this.paymentGateway)||void 0===t?void 0:t.card_payment)!==this.status.PUBLIC&&parseInt(null===(e=this.paymentGateway)||void 0===e?void 0:e.cash_on_delivery)!==this.status.PUBLIC},productPrice:function(){return this.cartPrice.totalPriceWithOffer+this.cartPrice.shippingPrice+this.cartPrice.tax},totalPrice:function(){return this.productPrice?this.productPrice-this.cartPrice.voucher:0},checkedProduct:function(){return this.cartProducts.filter((function(t){return 1===parseInt(t.selected)}))}},Object(f.c)("common",["currencyIcon","currency","paymentGateway"])),Object(f.c)("cart",["cartProducts"])),methods:O(O(O({checkVoucher:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.submitting=!0,e.next=3,t.voucherValidity({voucher:t.voucher,price:null===(r=t.cartPrice)||void 0===r?void 0:r.totalPriceWithOffer});case 3:c=e.sent,t.submitting=!1,201===(null==c?void 0:c.status)?t.voucherError=c.data.form[0]:t.voucherResult=c.data;case 6:case"end":return e.stop()}}),e)})))()},calculatedPrice:function(t){this.cartPrice=t}},Object(f.b)("common",["setToastMessage","setToastError"])),Object(f.b)("order",["orderAction","voucherValidity","sendOrderEmail","paymentDone"])),Object(f.b)("cart",["getCartByUser","subtractCartProductCount","emptyCartProduct"])),asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,c,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.store,c=t.error,e.prev=1,r.state.common.paymentGateway){e.next=7;break}return e.next=5,r.dispatch("common/getRequest",{params:{},api:"paymentGateway"});case 5:data=e.sent,r.commit("common/SET_PAYMENT_GATEWAY",data.data);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},mounted:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.orderId="",t.voucherError=null,t.voucherResult=null,e.prev=3,0!==t.cartProducts.length){e.next=7;break}return e.next=7,t.getCartByUser();case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",t.$nuxt.error(e.t0));case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))()}},k=r(13),component=Object(k.a)(w,(function(){var t=this,e=t._self._c;return e("client-only",[e("div",{staticClass:"container-fluid mtb-20 mtb-sm-15"},[e("div",{staticClass:"product-detail"},[e("div",{staticClass:"area detail-left pt-10 plr-20 plr-sm-15 pb-20 pb-sm-15 mr-20 mr-sm mb-sm-15"},[e("h5",{staticClass:"b-b pb-10 mb-15 bold"},[t._v("\n          "+t._s(t.$t("checkout.selectPayment"))+"\n        ")]),t._v(" "),e("payment-gateways",{ref:"paymentGateways",attrs:{"total-price":t.totalPrice,voucher:t.voucherResult}})],1),t._v(" "),e("checkout-right",{attrs:{"route-link":"checkout","checked-product":t.checkedProduct,"has-shipping":!0,"voucher-result":t.voucherResult,"hide-btn":!0},on:{"calculated-price":t.calculatedPrice},scopedSlots:t._u([{key:"checkout",fn:function(){return[e("div",{class:{invalid:!!t.voucherError}},[e("form",{staticClass:"mt-15 btn-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.voucher,expression:"voucher"}],staticClass:"pl-15 pr-80",attrs:{placeholder:t.$t("checkout.voucherCode"),type:"text"},domProps:{value:t.voucher},on:{input:function(e){e.target.composing||(t.voucher=e.target.value)}}}),t._v(" "),e("ajax-button",{staticClass:"primary-btn plr-15",attrs:{type:"button","fetching-data":t.submitting,"loading-text":"",disabled:!t.voucher||!!t.voucherError||!!t.voucherResult,text:t.$t("checkout.apply")},on:{clicked:t.checkVoucher}})],1)]),t._v(" "),t.voucherError?e("span",{staticClass:"error"},[t._v("\n          "+t._s(t.voucherError)+"\n        ")]):t._e()]},proxy:!0}])})],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PaymentGateways:r(482).default,AjaxButton:r(281).default,CheckoutRight:r(484).default})}}]);