(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{359:function(e,t){function n(e,t,n){var r,o,c,l,d;function h(){var f=Date.now()-l;f<t&&f>=0?r=setTimeout(h,t-f):(r=null,n||(d=e.apply(c,o),c=o=null))}null==t&&(t=100);var f=function(){c=this,o=arguments,l=Date.now();var f=n&&!r;return r||(r=setTimeout(h,t)),f&&(d=e.apply(c,o),c=o=null),d};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(d=e.apply(c,o),c=o=null,clearTimeout(r),r=null)},f}n.debounce=n,e.exports=n},366:function(e,t,n){var content=n(516);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(52).default)("32448bfb",content,!0,{sourceMap:!1})},372:function(e,t,n){"use strict";n.r(t);var r=n(3),o=n(6),c=(n(23),n(230),n(22),n(8),n(29),n(82),n(21),n(20),n(27),n(17),n(28),n(60)),l=n(359),d=n(44),h=n(11);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var x={name:"TagSearch",data:function(){return{setApi:"setTags",searchedString:"",tagList:null,loading:!1,autoSuggestionOpen:!1,deleteWarning:!1}},props:{tags:{type:String,default:""}},directives:{outsideClick:c.a},components:{Spinner:d.default},watch:{searchedString:Object(l.debounce)((function(){this.fetchingData()}),700)},computed:{tagExists:function(){var e=this;return this.tagList.findIndex((function(t){return t.title===e.searchedString}))>-1},selectedTags:function(){return this.tags?this.tags.split(",").filter((function(e){return e})):[]}},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({deleteKeyPress:function(){this.searchedString||(this.deleteWarning&&this.deleteTag(this.selectedTags[this.selectedTags.length-1]),this.deleteWarning=!this.deleteWarning)},deleteTag:function(e){this.$emit("delete",e)},openResult:function(){this.autoSuggestionOpen=!this.autoSuggestionOpen,this.fetchingData()},saveTag:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.setRequest({params:{title:e.searchedString},api:"setTags"});case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(1),t.abrupt("return",e.$nuxt.error(t.t0));case 9:e.loading=!1;case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()},fetchingData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.getRequest({params:{q:e.searchedString},api:"getTags"});case 4:n=t.sent,(data=n.data)&&(e.tagList=data),t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",e.$nuxt.error(t.t0));case 12:e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},autoSuggestionClose:function(){this.autoSuggestionOpen=this.deleteWarning=!1,this.searchedString=""},emitAddingTag:function(e){-1===this.selectedTags.findIndex((function(t){return t===e}))&&this.$emit("add",e)},clickedItem:function(data){data||(this.saveTag(),data=this.searchedString),this.emitAddingTag(data),this.autoSuggestionClose(),this.$refs.tagSearchInput.focus()}},Object(h.b)("common",["setRequest","getRequest"]))},v=x,w=(n(515),n(14)),component=Object(w.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.autoSuggestionClose,expression:"autoSuggestionClose"}],staticClass:"tag-wrapper"},[n("ul",{staticClass:"tags"},[e._l(e.selectedTags,(function(t,r){return n("li",{key:r,class:{warning:e.deleteWarning&&r===e.selectedTags.length-1}},[n("span",{staticClass:"tag"},[e._v("\n        "+e._s(t)+"\n        "),n("span",{staticClass:"close-btn",on:{click:function(n){return e.deleteTag(t)}}},[n("i",{staticClass:"icon close-icon"})])])])})),e._v(" "),n("li",{staticClass:"tag-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchedString,expression:"searchedString"}],ref:"tagSearchInput",attrs:{type:"text",placeholder:"Write here"},domProps:{value:e.searchedString},on:{focus:e.openResult,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.clickedItem({title:e.searchedString}))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deleteKeyPress()}],input:function(t){t.target.composing||(e.searchedString=t.target.value)}}})])],2),e._v(" "),e.autoSuggestionOpen?n("div",{staticClass:"tag-dropdown"},[e.loading?n("div",{staticClass:"spinner-wrapper"},[n("spinner",{attrs:{radius:40,color:"primary"}})],1):e.tagList?n("ul",[e._l(e.tagList,(function(t,r){return n("li",{key:r},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.clickedItem(t.title)}}},[e._v("\n          "+e._s(t.title)+"\n        ")])])})),e._v(" "),e.searchedString&&!e.tagExists?n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.clickedItem(null)}}},[e._v("\n          "+e._s(e.searchedString)+" (New)\n        ")])]):e._e()],2):e.searchedString?e._e():n("p",[e._v("\n      Nothing found\n    ")])]):e._e()])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Spinner:n(44).default})},515:function(e,t,n){"use strict";n(366)},516:function(e,t,n){var r=n(51)(!1);r.push([e.i,".tag-wrapper{border:1px solid #ddd;border-radius:4px;padding:10px 15px;position:relative}.tag-wrapper .tags{display:flex;flex-wrap:wrap}.tag-wrapper .tags .tag-input{flex-grow:1;position:relative;padding-right:34px}.tag-wrapper .tags .tag-input .spinner{position:absolute;top:50%;transform:translateY(-50%);right:5px}.tag-wrapper .tags .tag-input input{border:none;padding:0;line-height:30px;height:30px;margin:5px 10px 5px 0;box-shadow:none;background:none}.tag-wrapper .tags .tag{border:1px solid #ddd;border-radius:50px;line-height:25px;height:30px;color:#333;margin:5px 10px 5px 0;background:#eee;position:relative;padding:0 30px 0 10px;display:flex;align-items:center}.tag-wrapper .tags .tag .close-btn{position:absolute;top:50%;margin-top:-10px;right:3px;cursor:pointer;color:#333;height:20px;width:20px;line-height:10px;border:1px solid #ddd;background:#ddd;margin-left:5px}.tag-wrapper .tags .tag .close-btn .close-icon{min-width:20px}.tag-wrapper .warning .tag{border-color:#a12321;background:#a12321;color:#fff}.tag-wrapper .tag-dropdown{overflow:auto;min-height:100px;max-height:300px;position:absolute;top:calc(100% + 1px);left:0;right:0;z-index:1;background:#fff;box-shadow:0 3px 10px rgba(0,0,0,.1);padding:15px 15px 5px;border-radius:5px}.tag-wrapper .tag-dropdown li a{border:1px solid #ddd;border-radius:50px;padding:0 20px;line-height:30px;height:32px;color:#333;margin:0 10px 10px 0}.tag-wrapper .tag-dropdown li a:hover{background:#eee}",""]),e.exports=r}}]);